/* RateIt | v1.0.21 / 03/16/2014 | https://rateit.codeplex.com/license
    http://rateit.codeplex.com | Twitter: @gjunge
*/
(function(b){b.walkmecustomsurveryrateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}};b.fn.walkmecustomsurveryrateit=function(g,h){var d=1;var f={};var e="init";var c=function(j){return j.charAt(0).toUpperCase()+j.substr(1);};if(this.length===0){return this;}var i=b.type(g);if(i=="object"||g===undefined||g===null){f=b.extend({},b.fn.walkmecustomsurveryrateit.defaults,g);}else{if(i=="string"&&g!=="reset"&&h===undefined){return this.data("walkmecustomsurveryrateit"+c(g));}else{if(i=="string"){e="setvalue";}}}return this.each(function(){var n=b(this);var o=function(A,C){if(C!=null){var z="aria-value"+((A=="value")?"now":A);var B=n.find(".walkmecustomsurveryrateit-range");if(B.attr(z)!=undefined){B.attr(z,C);}}arguments[0]="walkmecustomsurveryrateit"+c(A);return n.data.apply(n,arguments);};if(g=="reset"){var y=o("init");for(var r in y){n.data(r,y[r]);}if(o("backingfld")){var l=b(o("backingfld"));l.val(o("value"));l.trigger("change");if(l[0].min){l[0].min=o("min");}if(l[0].max){l[0].max=o("max");}if(l[0].step){l[0].step=o("step");}}n.trigger("reset");}if(!n.hasClass("walkmecustomsurveryrateit")){n.addClass("walkmecustomsurveryrateit");}var p=n.css("direction")!="rtl";if(e=="setvalue"){if(!o("init")){throw"Can't set value before init";}if(g=="readonly"&&h==true&&!o("readonly")){n.find(".walkmecustomsurveryrateit-range").unbind();o("wired",false);}if(g=="value"){h=(h==null)?o("min"):Math.max(o("min"),Math.min(o("max"),h));}if(o("backingfld")){var l=b(o("backingfld"));if(g=="value"){l.val(h);}if(g=="min"&&l[0].min){l[0].min=h;}if(g=="max"&&l[0].max){l[0].max=h;}if(g=="step"&&l[0].step){l[0].step=h;}}o(g,h);}if(!o("init")){o("min",isNaN(o("min"))?f.min:o("min"));o("max",isNaN(o("max"))?f.max:o("max"));o("step",o("step")||f.step);o("readonly",o("readonly")!==undefined?o("readonly"):f.readonly);o("resetable",o("resetable")!==undefined?o("resetable"):f.resetable);o("backingfld",o("backingfld")||f.backingfld);o("starwidth",o("starwidth")||f.starwidth);o("starheight",o("starheight")||f.starheight);o("value",Math.max(o("min"),Math.min(o("max"),(!isNaN(o("value"))?o("value"):(!isNaN(f.value)?f.value:f.min)))));o("ispreset",o("ispreset")!==undefined?o("ispreset"):f.ispreset);if(o("backingfld")){var l=b(o("backingfld")).hide();if(l.attr("disabled")||l.attr("readonly")){o("readonly",true);}if(l[0].nodeName=="INPUT"){if(l[0].type=="range"||l[0].type=="text"){o("min",parseInt(l.attr("min"))||o("min"));o("max",parseInt(l.attr("max"))||o("max"));o("step",parseInt(l.attr("step"))||o("step"));}}if(l[0].nodeName=="SELECT"&&l[0].options.length>1){o("min",(!isNaN(o("min"))?o("min"):Number(l[0].options[0].value)));o("max",Number(l[0].options[l[0].length-1].value));o("step",Number(l[0].options[1].value)-Number(l[0].options[0].value));var v=l.find("option[selected]");if(v.length==1){o("value",v.val());}}else{o("value",l.val());}}var k=n[0].nodeName=="DIV"?"div":"span";d++;var m='<button id="walkmecustomsurveryrateit-reset-{{index}}" data-role="none" class="walkmecustomsurveryrateit-reset" aria-label="'+b.walkmecustomsurveryrateit.aria.resetLabel+'" aria-controls="walkmecustomsurveryrateit-range-{{index}}"></button><{{element}} id="walkmecustomsurveryrateit-range-{{index}}" class="walkmecustomsurveryrateit-range" tabindex="0" role="slider" aria-label="'+b.walkmecustomsurveryrateit.aria.ratingLabel+'" aria-owns="walkmecustomsurveryrateit-reset-{{index}}" aria-valuemin="'+o("min")+'" aria-valuemax="'+o("max")+'" aria-valuenow="'+o("value")+'"><{{element}} class="walkmecustomsurveryrateit-selected" style="height:'+o("starheight")+'px"></{{element}}><{{element}} class="walkmecustomsurveryrateit-hover" style="height:'+o("starheight")+'px"></{{element}}></{{element}}>';n.append(m.replace(/{{index}}/gi,d).replace(/{{element}}/gi,k));if(!p){n.find(".walkmecustomsurveryrateit-reset").css("float","right");n.find(".walkmecustomsurveryrateit-selected").addClass("walkmecustomsurveryrateit-selected-rtl");n.find(".walkmecustomsurveryrateit-hover").addClass("walkmecustomsurveryrateit-hover-rtl");}o("init",JSON.parse(JSON.stringify(n.data())));}n.find(".walkmecustomsurveryrateit-selected, .walkmecustomsurveryrateit-hover").height(o("starheight"));var s=n.find(".walkmecustomsurveryrateit-range");s.width(o("starwidth")*(o("max")-o("min"))).height(o("starheight"));var q="walkmecustomsurveryrateit-preset"+((p)?"":"-rtl");if(o("ispreset")){n.find(".walkmecustomsurveryrateit-selected").addClass(q);}else{n.find(".walkmecustomsurveryrateit-selected").removeClass(q);}if(o("value")!=null){var u=(o("value")-o("min"))*o("starwidth");n.find(".walkmecustomsurveryrateit-selected").width(u);}var t=n.find(".walkmecustomsurveryrateit-reset");if(t.data("wired")!==true){t.bind("click",function(z){z.preventDefault();t.blur();var A=b.Event("beforereset");n.trigger(A);if(A.isDefaultPrevented()){return false;}n.walkmecustomsurveryrateit("value",null);n.trigger("reset");}).data("wired",true);}var j=function(z,A){var C=(A.changedTouches)?A.changedTouches[0].pageX:A.pageX;var B=C-b(z).offset().left;if(!p){B=s.width()-B;}if(B>s.width()){B=s.width();}if(B<0){B=0;}return u=Math.ceil(B/o("starwidth")*(1/o("step")));};var w=function(B){var C=B*o("starwidth")*o("step");var A=s.find(".walkmecustomsurveryrateit-hover");if(A.data("width")!=C){s.find(".walkmecustomsurveryrateit-selected").hide();A.width(C).show().data("width",C);var z=[(B*o("step"))+o("min")];n.trigger("hover",z).trigger("over",z);}};var x=function(A){var z=b.Event("beforerated");n.trigger(z,[A]);if(z.isDefaultPrevented()){return false;}o("value",A);if(o("backingfld")){b(o("backingfld")).val(A).trigger("change");}if(o("ispreset")){s.find(".walkmecustomsurveryrateit-selected").removeClass(q);o("ispreset",false);}s.find(".walkmecustomsurveryrateit-hover").hide();s.find(".walkmecustomsurveryrateit-selected").width(A*o("starwidth")-(o("min")*o("starwidth"))).show();n.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[A]);return true;};if(!o("readonly")){if(!o("resetable")){t.hide();}if(!o("wired")){s.bind("touchmove touchend",a);s.mousemove(function(z){var A=j(this,z);w(A);});s.mouseleave(function(z){s.find(".walkmecustomsurveryrateit-hover").hide().width(0).data("width","");n.trigger("hover",[null]).trigger("over",[null]);s.find(".walkmecustomsurveryrateit-selected").show();});s.mouseup(function(z){var A=j(this,z);var B=(A*o("step"))+o("min");x(B);s.blur();});s.keyup(function(z){if(z.which==38||z.which==(p?39:37)){x(Math.min(o("value")+o("step"),o("max")));}if(z.which==40||z.which==(p?37:39)){x(Math.max(o("value")-o("step"),o("min")));}});o("wired",true);}if(o("resetable")){t.show();}}else{t.hide();}s.attr("aria-readonly",o("readonly"));});};function a(c){var f=c.originalEvent.changedTouches,d=f[0],g="";switch(c.type){case"touchmove":g="mousemove";break;case"touchend":g="mouseup";break;default:return;}var e=document.createEvent("MouseEvent");e.initMouseEvent(g,true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,false,false,false,false,0,null);d.target.dispatchEvent(e);c.preventDefault();}b.fn.walkmecustomsurveryrateit.defaults={min:0,max:5,step:1,starwidth:22,starheight:17,readonly:false,resetable:false,ispreset:false};})(wmjQuery);function walkmeSurveyLoader(){var g={shouldLog:false,resourcesUrl:"https://d3b3ehuo35wzeh.cloudfront.net/users/50da9c7eeffe43d080db8fc5e642ab72/scripts/"};function e(i){try{if(g.shouldLog&&console&&console.log){console.log(i);}}catch(h){}}function f(){var j=["star.png"];for(var h=0;h<j.length;h++){d(g.resourcesUrl+j[h]);}}function d(h){var i=new Image();i.src=h;i.onload=function(){};}this.init=function b(){a();f();};function a(){c(g.resourcesUrl+"walkme-tophat.css");}function c(h){var l=document.createElement("link");l.setAttribute("rel","stylesheet");l.setAttribute("type","text/css");l.setAttribute("href",h);document.getElementsByTagName("head")[0].appendChild(l);var j=document.getElementsByTagName("frame");if(typeof(j)!="undefined"&&j!==null&&j.length>0){for(var k=0;k<j.length;++k){window.frames[k].document.getElementsByTagName("head")[0].appendChild(l);}}}}function WalkmeSurvey(){var k=this;var e;var j;var i;var l;var a;var h;var g;var d;var f;var c;var b;var E="Submit";var x="Give Us Your Feedback";var F="Thank You For The Feedback!";var A="Please Score This Guide!";function q(){window.walkmeExternalSurvey=D;}this.close=function(){n();};function D(I,H){i=I.surveyJson;l=I.tutorialId;a=H;h=I.submitResults;g=I.submitExit;_stepIndex=I.stepIndex;c=I.lastStepIndex;d=I.playGuid;f=I.source;b=I.drawBalloonFunc;e=undefined;j=undefined;if(!r(l,_stepIndex)){return false;}C();}function C(){_makeTutorial.releaseBalloons();var J=wmjQuery('<div><div class="walkmecustomsurveryrateit"></div></div>');J.walkmecustomsurveryrateit();var H=[];var I={title:'<div><div style="padding-top: 7px !important; height: 35px !important; text-align:center !important">'+A+"</div></div>"+J.html(),htmlContent:""};b(I,600,o(H),v);}function o(H){var I={popupStepButtons:H};if(i.Settings&&i.Settings.fadeBackground){I.fadeBackground=i.Settings.fadeBackground;}return I;}function v(H){z(H);var I=H.find("div.walkmecustomsurveryrateit");H.css({minWidth:"",width:"270px",height:"100px"});wmjQuery(".walkme-action-close",H).attr("onclick","").unbind("click");wmjQuery(".walkme-action-close",H).click(function(){G(false);});p(H,I);}function p(H,I){I.css("cursor","pointer");I.walkmecustomsurveryrateit();I.bind("rated",function(J,K){y(K);});}function s(H){return wmjQuery(".walkme-custom-balloon-button:contains("+E+")",H);}function y(J){_makeTutorial.releaseBalloons();e=J;var H=[{id:0,action:7,name:E}];var I={title:x,htmlContent:wmjQuery("<div class='walkme-css-reset walkme-survey-inputs'><textarea maxlength='500' class='walkme-css-reset walkme-survey-input-text'></textarea></div>")};b(I,600,o(H),w);}function w(H){H.addClass("walkme-thanks-for-feedback-balloon");z(H);wmjQuery(".walkme-action-close",H).unbind("click");wmjQuery(".walkme-action-close",H).click(function(){G(true);});H.css({minWidth:"",width:"270px"});var J=H.find(".walkme-survey-input-text");J.focus();var I=s();I.addClass("walkme-survey-submit-button");I.click(function(){j=J.val();J.after("<div class='walkme-thanks-for-feedback'>"+F+"</div>");I.remove();B(true);H.fadeOut(1500,function(){n();});});}function z(H){wmjQuery(".walkme-custom-balloon-powered-by-div, .walkme-custom-balloon-separator",H).remove();}function r(J,H){var I=u(J);if(I!==null&&H>=I){return true;}return false;}function u(K){var J=t(K);if(J&&J.CustomField1){try{var H=wmjQuery.parseJSON(J.CustomField1);if(H){return H.startSurveyIdx;}}catch(I){}}return null;}function t(I){var J=WalkMeAPI.getWalkthrus();if(J){for(var H=0;H<J.length;H++){if(J[H]&&J[H].Id==I){return J[H];}}}return null;}function G(H){B(H);n();}function n(){if(a){a();}_makeTutorial.releaseBalloons();}function B(H){var I=m(H);if(H){h(I);}else{g(I);}}function m(K){var I={};var J=[];I.playGuid=d;I.surveyGuid=i.Guid;I.tutorialId=l;I.source=f;if(K){if(e!=undefined){var L=i.Questions[0];var H={};H.questionId=L.Id;H.answerId=L.Answers[e-1].Id;J.push(H);}if(j!=undefined){var L=i.Questions[1];var H={};H.questionId=L.Id;H.answerText=j;J.push(H);}}I.answers=J;return I;}q.apply(null,arguments);}function walkme_player_event(a){if(a&&a.Type=="WalkthruSelected"){if(walkmeSurvey){walkmeSurvey.close();}}}var walkmeSurvey=new WalkmeSurvey();var walkmeSurveyLoader=new walkmeSurveyLoader();walkmeSurveyLoader.init();(function(){function b(){var c=false;this.init=function(){if(g()){c=true;}else{f(e);}h("BeforeMenuOpen",d);};function e(){c=true;d();}function h(k,i){var j=window.walkme_player_event;walkme_player_event=function(l){if(l.Type==k){i();}if(j){j();}};}function g(){return window.$zopim&&$zopim.livechat&&$zopim.livechat.window;}function f(i){(function(){window.$zopim||(function(k,m){var n=$zopim=function(o){n._.push(o);},j=n.s=k.createElement(m),l=k.getElementsByTagName(m)[0];n.set=function(p){n.set._.push(p);};n._=[];n.set._=[];j.async=!0;j.setAttribute("charset","utf-8");j.src="//v2.zopim.com/?2HrAUsP1499iOLWzH3jU0hu2mZAsLutj";n.t=+new Date;j.type="text/javascript";l.parentNode.insertBefore(j,l);})(document,"script");})();setTimeout(i,100);}function d(){if(!c){console.log("[WalkMe - livechat integration] chat is not ready yet");return;}var j=wmjQuery("#walkme-menu #walkme-footer");if(!j.exist()||j.find("#walkme-livechat").exist()){return;}var i=wmjQuery('<div id="walkme-livechat" class="walkme-footer-item walkme-livechat-item"><div class="walkme-item-icon walkme-livechat-icon"></div><div class="walkme-item-title walkme-livechat-title">Chat With Us</div></div>');i.bind("click.walkmeZopim",function(){WalkMePlayerAPI.toggleMenu();$zopim.livechat.window.show();});j.append(i);}}var a=new b();a.init();})();if(window.walkme_post_lib_loaded!==undefined){walkme_post_lib_loaded();}